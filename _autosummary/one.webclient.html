

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>one.webclient &mdash; IBL Library  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/style.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="ibllib" href="ibllib.html" />
    <link rel="prev" title="one.util" href="one.util.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> IBL Library
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../01_overview.html">IBL data structure</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../02_installation.html">Installation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../03_one.html">ONE</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../04_alf.html">Alyx Files (ALF)</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../05_datajoint.html">Datajoint</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../06_examples.html">Examples</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../07_tutorials.html">Tutorials</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../08_public.html">IBL Public Data</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../09_contribution.html">Contribution Statement</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../010_api_reference.html">API Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="one.html">one</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="one.alf.html">one.alf</a></li>
<li class="toctree-l3"><a class="reference internal" href="one.api.html">one.api</a></li>
<li class="toctree-l3"><a class="reference internal" href="one.converters.html">one.converters</a></li>
<li class="toctree-l3"><a class="reference internal" href="one.params.html">one.params</a></li>
<li class="toctree-l3"><a class="reference internal" href="one.tests.html">one.tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="one.util.html">one.util</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">one.webclient</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ibllib.html">ibllib</a></li>
<li class="toctree-l2"><a class="reference internal" href="brainbox.html">brainbox</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">IBL Library</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../010_api_reference.html">API Reference</a> &raquo;</li>
        
          <li><a href="one.html">one</a> &raquo;</li>
        
      <li>one.webclient</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/_autosummary/one.webclient.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="module-one.webclient">
<span id="one-webclient"></span><h1>one.webclient<a class="headerlink" href="#module-one.webclient" title="Permalink to this headline">¶</a></h1>
<p>API for interacting with a remote Alyx instance through REST
The AlyxClient class contains methods for making remote Alyx REST queries and downloading remote
files through Alyx.</p>
<p class="rubric">Examples</p>
<dl class="simple">
<dt>alyx = AlyxClient(</dt><dd><p>username=’test_user’, password=’TapetesBloc18’,
base_url=’<a class="reference external" href="https://test.alyx.internationalbrainlab.org">https://test.alyx.internationalbrainlab.org</a>’)</p>
</dd>
</dl>
<p># List subjects
subjects = alyx.rest(‘subjects’, ‘list’)</p>
<p># Create a subject
record = {</p>
<blockquote>
<div><p>‘nickname’: nickname,
‘responsible_user’: ‘olivier’,
‘birth_date’: ‘2019-06-15’,
‘death_date’: None,
‘lab’: ‘cortexlab’,</p>
</div></blockquote>
<p>}
new_subj = alyx.rest(‘subjects’, ‘create’, data=record)</p>
<p># Download a remote file, given a local path
url = ‘zadorlab/Subjects/flowers/2018-07-13/1/channels.probe.npy’
local_path = self.alyx.download_file(url)</p>
<p>TODO Move converters to another module
TODO Add logout method to delete the active token</p>
<p class="rubric">Functions</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#one.webclient._cache_response" title="one.webclient._cache_response"><code class="xref py py-obj docutils literal notranslate"><span class="pre">_cache_response</span></code></a></p></td>
<td><p>Decorator for the generic request method; caches the result of the query and on subsequent calls, returns cache instead of hitting the database :param method: function to wrap (i.e.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#one.webclient._path_from_dataset" title="one.webclient._path_from_dataset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">_path_from_dataset</span></code></a></p></td>
<td><p>returns the local file path from a dset record from a REST query :param dset: dset dictionary or list of dictionaries from ALyx rest endpoint :param root_path: (optional) the prefix path such as one download directory or sdsc root :param repository: :param uuid: (optional bool) if True, will add UUID before the file extension :return: Path or list of Path</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#one.webclient._path_from_filerecord" title="one.webclient._path_from_filerecord"><code class="xref py py-obj docutils literal notranslate"><span class="pre">_path_from_filerecord</span></code></a></p></td>
<td><p>Returns a data file Path constructed from an Alyx file record.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#one.webclient.dataset_record_to_url" title="one.webclient.dataset_record_to_url"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dataset_record_to_url</span></code></a></p></td>
<td><p>Extracts a list of files urls from a list of dataset queries.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#one.webclient.file_record_to_url" title="one.webclient.file_record_to_url"><code class="xref py py-obj docutils literal notranslate"><span class="pre">file_record_to_url</span></code></a></p></td>
<td><p>Translate a Json dictionary to an usable http url for downloading files.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#one.webclient.globus_path_from_dataset" title="one.webclient.globus_path_from_dataset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">globus_path_from_dataset</span></code></a></p></td>
<td><p>Returns local one file path from a dset record or a list of dsets records from REST :param dset: dset dictionary or list of dictionaries from ALyx rest endpoint :param repository: (optional) repository name of the file record (if None, will take  the first filerecord with an URL)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#one.webclient.http_download_file" title="one.webclient.http_download_file"><code class="xref py py-obj docutils literal notranslate"><span class="pre">http_download_file</span></code></a></p></td>
<td><p><dl class="field-list simple">
<dt class="field-odd">param full_link_to_file</dt>
<dd class="field-odd"><p>http link to the file.</p>
</dd>
</dl>
</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#one.webclient.http_download_file_list" title="one.webclient.http_download_file_list"><code class="xref py py-obj docutils literal notranslate"><span class="pre">http_download_file_list</span></code></a></p></td>
<td><p>Downloads a list of files from the flat Iron from a list of links.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#one.webclient.one_path_from_dataset" title="one.webclient.one_path_from_dataset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">one_path_from_dataset</span></code></a></p></td>
<td><p>Returns local one file path from a dset record or a list of dsets records from REST :param dset: dset dictionary or list of dictionaries from ALyx rest endpoint :param one_cache: the one cache directory</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#one.webclient.sdsc_globus_path_from_dataset" title="one.webclient.sdsc_globus_path_from_dataset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sdsc_globus_path_from_dataset</span></code></a></p></td>
<td><p><dl class="field-list simple">
<dt class="field-odd">param dset</dt>
<dd class="field-odd"><p>dset dictionary or list of dictionaries from ALyx rest endpoint</p>
</dd>
</dl>
</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#one.webclient.sdsc_path_from_dataset" title="one.webclient.sdsc_path_from_dataset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sdsc_path_from_dataset</span></code></a></p></td>
<td><p>Returns sdsc file path from a dset record or a list of dsets records from REST :param dset: dset dictionary or list of dictionaries from ALyx rest endpoint :param root_path: (optional) the prefix path such as one download directory or sdsc root</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Classes</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#one.webclient.AlyxClient" title="one.webclient.AlyxClient"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AlyxClient</span></code></a></p></td>
<td><p>Class that implements simple GET/POST wrappers for the Alyx REST API <a class="reference external" href="http://alyx.readthedocs.io/en/latest/api.html">http://alyx.readthedocs.io/en/latest/api.html</a>  # FIXME old link</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#one.webclient.UniqueSingletons" title="one.webclient.UniqueSingletons"><code class="xref py py-obj docutils literal notranslate"><span class="pre">UniqueSingletons</span></code></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#one.webclient._PaginatedResponse" title="one.webclient._PaginatedResponse"><code class="xref py py-obj docutils literal notranslate"><span class="pre">_PaginatedResponse</span></code></a></p></td>
<td><p>This class allows to emulate a list from a paginated response.</p></td>
</tr>
</tbody>
</table>
<dl class="py function">
<dt id="one.webclient._cache_response">
<code class="sig-name descname">_cache_response</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">method</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/webclient.html#_cache_response"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.webclient._cache_response" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator for the generic request method; caches the result of the query and on subsequent
calls, returns cache instead of hitting the database
:param method: function to wrap (i.e. AlyxClient._generic_request)
:return: handle to wrapped method</p>
</dd></dl>

<dl class="py class">
<dt id="one.webclient._PaginatedResponse">
<em class="property">class </em><code class="sig-name descname">_PaginatedResponse</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">alyx</span></em>, <em class="sig-param"><span class="n">rep</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/webclient.html#_PaginatedResponse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.webclient._PaginatedResponse" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">collections.abc.Mapping</span></code></p>
<p>This class allows to emulate a list from a paginated response.
Provides cache functionality
PaginatedResponse(alyx, response)</p>
<dl class="py method">
<dt id="one.webclient._PaginatedResponse.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">alyx</span></em>, <em class="sig-param"><span class="n">rep</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/webclient.html#_PaginatedResponse.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.webclient._PaginatedResponse.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

<dl class="py method">
<dt id="one.webclient._PaginatedResponse.__len__">
<code class="sig-name descname">__len__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/webclient.html#_PaginatedResponse.__len__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.webclient._PaginatedResponse.__len__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="one.webclient._PaginatedResponse.__getitem__">
<code class="sig-name descname">__getitem__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">item</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/webclient.html#_PaginatedResponse.__getitem__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.webclient._PaginatedResponse.__getitem__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="one.webclient._PaginatedResponse.__iter__">
<code class="sig-name descname">__iter__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/webclient.html#_PaginatedResponse.__iter__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.webclient._PaginatedResponse.__iter__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="one.webclient._PaginatedResponse.__abstractmethods__">
<code class="sig-name descname">__abstractmethods__</code><em class="property"> = frozenset({})</em><a class="headerlink" href="#one.webclient._PaginatedResponse.__abstractmethods__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="one.webclient._PaginatedResponse.__dict__">
<code class="sig-name descname">__dict__</code><em class="property"> = mappingproxy({'__module__': 'one.webclient', '__doc__': '\n    This class allows to emulate a list from a paginated response.\n    Provides cache functionality\n    PaginatedResponse(alyx, response)\n    ', '__init__': &lt;function _PaginatedResponse.__init__&gt;, '__len__': &lt;function _PaginatedResponse.__len__&gt;, '__getitem__': &lt;function _PaginatedResponse.__getitem__&gt;, '__iter__': &lt;function _PaginatedResponse.__iter__&gt;, '__dict__': &lt;attribute '__dict__' of '_PaginatedResponse' objects&gt;, '__weakref__': &lt;attribute '__weakref__' of '_PaginatedResponse' objects&gt;, '__abstractmethods__': frozenset(), '_abc_impl': &lt;_abc_data object&gt;})</em><a class="headerlink" href="#one.webclient._PaginatedResponse.__dict__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="one.webclient._PaginatedResponse.__doc__">
<code class="sig-name descname">__doc__</code><em class="property"> = '\n    This class allows to emulate a list from a paginated response.\n    Provides cache functionality\n    PaginatedResponse(alyx, response)\n    '</em><a class="headerlink" href="#one.webclient._PaginatedResponse.__doc__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="one.webclient._PaginatedResponse.__module__">
<code class="sig-name descname">__module__</code><em class="property"> = 'one.webclient'</em><a class="headerlink" href="#one.webclient._PaginatedResponse.__module__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="one.webclient._PaginatedResponse.__weakref__">
<code class="sig-name descname">__weakref__</code><a class="headerlink" href="#one.webclient._PaginatedResponse.__weakref__" title="Permalink to this definition">¶</a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

<dl class="py attribute">
<dt id="one.webclient._PaginatedResponse._abc_impl">
<code class="sig-name descname">_abc_impl</code><em class="property"> = &lt;_abc_data object&gt;</em><a class="headerlink" href="#one.webclient._PaginatedResponse._abc_impl" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt id="one.webclient.sdsc_globus_path_from_dataset">
<code class="sig-name descname">sdsc_globus_path_from_dataset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dset</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/webclient.html#sdsc_globus_path_from_dataset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.webclient.sdsc_globus_path_from_dataset" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dset</strong> – dset dictionary or list of dictionaries from ALyx rest endpoint</p>
</dd>
</dl>
<p>Returns SDSC globus file path from a dset record or a list of dsets records from REST</p>
</dd></dl>

<dl class="py function">
<dt id="one.webclient.globus_path_from_dataset">
<code class="sig-name descname">globus_path_from_dataset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dset</span></em>, <em class="sig-param"><span class="n">repository</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">uuid</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/webclient.html#globus_path_from_dataset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.webclient.globus_path_from_dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns local one file path from a dset record or a list of dsets records from REST
:param dset: dset dictionary or list of dictionaries from ALyx rest endpoint
:param repository: (optional) repository name of the file record (if None, will take</p>
<blockquote>
<div><p>the first filerecord with an URL)</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt id="one.webclient.one_path_from_dataset">
<code class="sig-name descname">one_path_from_dataset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dset</span></em>, <em class="sig-param"><span class="n">one_cache</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/webclient.html#one_path_from_dataset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.webclient.one_path_from_dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns local one file path from a dset record or a list of dsets records from REST
:param dset: dset dictionary or list of dictionaries from ALyx rest endpoint
:param one_cache: the one cache directory</p>
</dd></dl>

<dl class="py function">
<dt id="one.webclient.sdsc_path_from_dataset">
<code class="sig-name descname">sdsc_path_from_dataset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dset</span></em>, <em class="sig-param"><span class="n">root_path</span><span class="o">=</span><span class="default_value">PurePosixPath('/mnt/ibl')</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/webclient.html#sdsc_path_from_dataset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.webclient.sdsc_path_from_dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns sdsc file path from a dset record or a list of dsets records from REST
:param dset: dset dictionary or list of dictionaries from ALyx rest endpoint
:param root_path: (optional) the prefix path such as one download directory or sdsc root</p>
</dd></dl>

<dl class="py function">
<dt id="one.webclient._path_from_dataset">
<code class="sig-name descname">_path_from_dataset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dset</span></em>, <em class="sig-param"><span class="n">root_path</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">repository</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">uuid</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/webclient.html#_path_from_dataset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.webclient._path_from_dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>returns the local file path from a dset record from a REST query
:param dset: dset dictionary or list of dictionaries from ALyx rest endpoint
:param root_path: (optional) the prefix path such as one download directory or sdsc root
:param repository:
:param uuid: (optional bool) if True, will add UUID before the file extension
:return: Path or list of Path</p>
</dd></dl>

<dl class="py function">
<dt id="one.webclient._path_from_filerecord">
<code class="sig-name descname">_path_from_filerecord</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fr</span></em>, <em class="sig-param"><span class="n">root_path</span><span class="o">=</span><span class="default_value">PurePosixPath('/mnt/ibl')</span></em>, <em class="sig-param"><span class="n">uuid</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/webclient.html#_path_from_filerecord"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.webclient._path_from_filerecord" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a data file Path constructed from an Alyx file record.  The Path type returned
depends on the type of root_path: If root_path is a string a Path object is returned,
otherwise if the root_path is a PurePath, the same path type is returned.
:param fr: An Alyx file record dict
:param root_path: An optional root path
:param uuid: An optional UUID to add to the file name
:return: A filepath as a pathlib object</p>
</dd></dl>

<dl class="py function">
<dt id="one.webclient.http_download_file_list">
<code class="sig-name descname">http_download_file_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">links_to_file_list</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/webclient.html#http_download_file_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.webclient.http_download_file_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Downloads a list of files from the flat Iron from a list of links.
Same options behaviour as http_download_file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>links_to_file_list</strong> (<em>list</em>) – list of http links to files.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(list) a list of the local full path of the downloaded files.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="one.webclient.http_download_file">
<code class="sig-name descname">http_download_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">full_link_to_file</span></em>, <em class="sig-param"><span class="n">chunks</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">clobber</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">silent</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">username</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">password</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">cache_dir</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">return_md5</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">headers</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/webclient.html#http_download_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.webclient.http_download_file" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>full_link_to_file</strong> (<em>str</em>) – http link to the file.</p></li>
<li><p><strong>chunks</strong> (<em>tuple of ints</em>) – chunks to download</p></li>
<li><p><strong>clobber</strong> (<em>bool</em>) – [False] If True, force overwrite the existing file.</p></li>
<li><p><strong>username</strong> (<em>str</em>) – [‘’] authentication for password protected file server.</p></li>
<li><p><strong>password</strong> (<em>str</em>) – [‘’] authentication for password protected file server.</p></li>
<li><p><strong>cache_dir</strong> (<em>str</em>) – [‘’] directory in which files are cached; defaults to user’s
Download directory.</p></li>
<li><p><strong>return_md5</strong> (<em>bool</em>) – if true an MD5 hash of the file is additionally returned</p></li>
</ul>
</dd>
<dt class="field-even">Param</dt>
<dd class="field-even"><p>headers: [{}] additional headers to add to the request (auth tokens etc..)</p>
</dd>
<dt class="field-odd">Param</dt>
<dd class="field-odd"><p>silent: [False] suppress download progress bar</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(str) a list of the local full path of the downloaded files.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="one.webclient.file_record_to_url">
<code class="sig-name descname">file_record_to_url</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file_records</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/webclient.html#file_record_to_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.webclient.file_record_to_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Translate a Json dictionary to an usable http url for downloading files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>file_records</strong> (<em>dict</em>) – json containing a ‘data_url’ field</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>urls: (list) a list of strings representing full data urls</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="one.webclient.dataset_record_to_url">
<code class="sig-name descname">dataset_record_to_url</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dataset_record</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/webclient.html#dataset_record_to_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.webclient.dataset_record_to_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Extracts a list of files urls from a list of dataset queries.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dataset_record</strong> (<em>list</em>) – dataset Json from a rest request.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(list) a list of strings representing files urls corresponding to the datasets records</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="one.webclient.UniqueSingletons">
<em class="property">class </em><code class="sig-name descname">UniqueSingletons</code><a class="reference internal" href="../_modules/one/webclient.html#UniqueSingletons"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.webclient.UniqueSingletons" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code></p>
<dl class="py attribute">
<dt id="one.webclient.UniqueSingletons._instances">
<code class="sig-name descname">_instances</code><em class="property">: list</em><em class="property"> = [{&lt;class 'one.webclient.AlyxClient'&gt;: {'args': ((), {'username': 'test_user', 'password': 'TapetesBloc18', 'base_url': 'https://test.alyx.internationalbrainlab.org', 'cache_dir': None, 'silent': True}), 'instance': &lt;one.webclient.AlyxClient object&gt;}}]</em><a class="headerlink" href="#one.webclient.UniqueSingletons._instances" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="one.webclient.UniqueSingletons.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/webclient.html#UniqueSingletons.__call__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.webclient.UniqueSingletons.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Call self as a function.</p>
</dd></dl>

<dl class="py attribute">
<dt id="one.webclient.UniqueSingletons.__annotations__">
<code class="sig-name descname">__annotations__</code><em class="property"> = {'_instances': &lt;class 'list'&gt;}</em><a class="headerlink" href="#one.webclient.UniqueSingletons.__annotations__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="one.webclient.UniqueSingletons.__doc__">
<code class="sig-name descname">__doc__</code><em class="property"> = None</em><a class="headerlink" href="#one.webclient.UniqueSingletons.__doc__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="one.webclient.UniqueSingletons.__module__">
<code class="sig-name descname">__module__</code><em class="property"> = 'one.webclient'</em><a class="headerlink" href="#one.webclient.UniqueSingletons.__module__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="one.webclient.AlyxClient">
<em class="property">class </em><code class="sig-name descname">AlyxClient</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/webclient.html#AlyxClient"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.webclient.AlyxClient" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class that implements simple GET/POST wrappers for the Alyx REST API
<a class="reference external" href="http://alyx.readthedocs.io/en/latest/api.html">http://alyx.readthedocs.io/en/latest/api.html</a>  # FIXME old link</p>
<dl class="py attribute">
<dt id="one.webclient.AlyxClient._token">
<code class="sig-name descname">_token</code><em class="property"> = None</em><a class="headerlink" href="#one.webclient.AlyxClient._token" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="one.webclient.AlyxClient._headers">
<code class="sig-name descname">_headers</code><em class="property"> = None</em><a class="headerlink" href="#one.webclient.AlyxClient._headers" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="one.webclient.AlyxClient.user">
<code class="sig-name descname">user</code><em class="property"> = None</em><a class="headerlink" href="#one.webclient.AlyxClient.user" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="one.webclient.AlyxClient.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">base_url</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">username</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">password</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">cache_dir</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">silent</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">cache_rest</span><span class="o">=</span><span class="default_value">'GET'</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/webclient.html#AlyxClient.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.webclient.AlyxClient.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a client instance that allows to GET and POST to the Alyx server
For oneibl, constructor attempts to authenticate with credentials in params.py
For standalone cases, AlyxClient(username=’’, password=’’, base_url=’’)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>username</strong> – Alyx database user</p></li>
<li><p><strong>password</strong> – Alyx database password</p></li>
<li><p><strong>base_url</strong> – Alyx server address, including port and protocol</p></li>
<li><p><strong>cache_rest</strong> – which type of http method to apply cache to; if ‘*’, all requests are</p></li>
</ul>
</dd>
</dl>
<p>cached.</p>
</dd></dl>

<dl class="py attribute">
<dt id="one.webclient.AlyxClient.base_url">
<code class="sig-name descname">base_url</code><em class="property"> = None</em><a class="headerlink" href="#one.webclient.AlyxClient.base_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="one.webclient.AlyxClient.rest_schemes">
<em class="property">property </em><code class="sig-name descname">rest_schemes</code><a class="headerlink" href="#one.webclient.AlyxClient.rest_schemes" title="Permalink to this definition">¶</a></dt>
<dd><p>Delayed fetch of rest schemes speeds up instantiation</p>
</dd></dl>

<dl class="py method">
<dt id="one.webclient.AlyxClient.cache_dir">
<em class="property">property </em><code class="sig-name descname">cache_dir</code><a class="headerlink" href="#one.webclient.AlyxClient.cache_dir" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="one.webclient.AlyxClient.is_logged_in">
<code class="sig-name descname">is_logged_in</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/webclient.html#AlyxClient.is_logged_in"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.webclient.AlyxClient.is_logged_in" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="one.webclient.AlyxClient.list_endpoints">
<code class="sig-name descname">list_endpoints</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/webclient.html#AlyxClient.list_endpoints"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.webclient.AlyxClient.list_endpoints" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of available REST endpoints
:return: List of REST endpoint strings</p>
</dd></dl>

<dl class="py method">
<dt id="one.webclient.AlyxClient._generic_request">
<code class="sig-name descname">_generic_request</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">reqfunction</span></em>, <em class="sig-param"><span class="n">rest_query</span></em>, <em class="sig-param"><span class="n">data</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">files</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/webclient.html#AlyxClient._generic_request"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.webclient.AlyxClient._generic_request" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="one.webclient.AlyxClient.authenticate">
<code class="sig-name descname">authenticate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cache_token</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">force</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/webclient.html#AlyxClient.authenticate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.webclient.AlyxClient.authenticate" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets a security token from the Alyx REST API to create requests headers.
Credentials are loaded via oneibl.params</p>
</dd></dl>

<dl class="py method">
<dt id="one.webclient.AlyxClient.delete">
<code class="sig-name descname">delete</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rest_query</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/webclient.html#AlyxClient.delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.webclient.AlyxClient.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends a DELETE request to the Alyx server. Will raise an exception on any status_code
other than 200, 201.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>rest_query</strong> (<em>str</em>) – examples:
‘/weighings/c617562d-c107-432e-a8ee-682c17f9e698’
‘<a class="reference external" href="https://test.alyx.internationalbrainlab.org/weighings/c617562d-c107-432e-a8ee-682c17f9e698">https://test.alyx.internationalbrainlab.org/weighings/c617562d-c107-432e-a8ee-682c17f9e698</a>’.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(dict/list) json interpreted dictionary from response</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="one.webclient.AlyxClient.download_file">
<code class="sig-name descname">download_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">url</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/webclient.html#AlyxClient.download_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.webclient.AlyxClient.download_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Downloads a file on the Alyx server from a file record REST field URL
:param url: full url(s) of the file(s)
:param kwargs: webclient.http_download_file parameters
:return: local path(s) of downloaded file(s)</p>
</dd></dl>

<dl class="py method">
<dt id="one.webclient.AlyxClient.download_cache_tables">
<code class="sig-name descname">download_cache_tables</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/webclient.html#AlyxClient.download_cache_tables"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.webclient.AlyxClient.download_cache_tables" title="Permalink to this definition">¶</a></dt>
<dd><p>TODO Document
:return: List of parquet table file paths</p>
</dd></dl>

<dl class="py method">
<dt id="one.webclient.AlyxClient._validate_file_url">
<code class="sig-name descname">_validate_file_url</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">url</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/webclient.html#AlyxClient._validate_file_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.webclient.AlyxClient._validate_file_url" title="Permalink to this definition">¶</a></dt>
<dd><p>TODO Document
:param url:
:return:</p>
</dd></dl>

<dl class="py method">
<dt id="one.webclient.AlyxClient.rel_path2url">
<code class="sig-name descname">rel_path2url</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/webclient.html#AlyxClient.rel_path2url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.webclient.AlyxClient.rel_path2url" title="Permalink to this definition">¶</a></dt>
<dd><p>TODO Document
:param path:
:return:</p>
</dd></dl>

<dl class="py method">
<dt id="one.webclient.AlyxClient.get">
<code class="sig-name descname">get</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rest_query</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/webclient.html#AlyxClient.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.webclient.AlyxClient.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends a GET request to the Alyx server. Will raise an exception on any status_code
other than 200, 201.
For the dictionary contents and list of endpoints, refer to:
<a class="reference external" href="https://alyx.internationalbrainlab.org/docs">https://alyx.internationalbrainlab.org/docs</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>rest_query</strong> (<em>str</em>) – example: ‘/sessions?user=Hamish’.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(dict/list) json interpreted dictionary from response</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="one.webclient.AlyxClient.patch">
<code class="sig-name descname">patch</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rest_query</span></em>, <em class="sig-param"><span class="n">data</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">files</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/webclient.html#AlyxClient.patch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.webclient.AlyxClient.patch" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends a PATCH request to the Alyx server.
For the dictionary contents, refer to:
<a class="reference external" href="https://alyx.internationalbrainlab.org/docs">https://alyx.internationalbrainlab.org/docs</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rest_query</strong> (<em>str</em>) – (required)the endpoint as full or relative URL</p></li>
<li><p><strong>data</strong> (<em>None</em><em>, </em><em>dict</em><em> or </em><em>str</em>) – json encoded string or dictionary (cf.requests)</p></li>
<li><p><strong>files</strong> – dictionary / tuple (cf.requests)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>response object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="one.webclient.AlyxClient.post">
<code class="sig-name descname">post</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rest_query</span></em>, <em class="sig-param"><span class="n">data</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">files</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/webclient.html#AlyxClient.post"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.webclient.AlyxClient.post" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends a POST request to the Alyx server.
For the dictionary contents, refer to:
<a class="reference external" href="https://alyx.internationalbrainlab.org/docs">https://alyx.internationalbrainlab.org/docs</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rest_query</strong> (<em>str</em>) – (required)the endpoint as full or relative URL</p></li>
<li><p><strong>data</strong> (<em>None</em><em>, </em><em>dict</em><em> or </em><em>str</em>) – dictionary or json encoded string</p></li>
<li><p><strong>files</strong> – dictionary / tuple (cf.requests)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>response object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="one.webclient.AlyxClient.put">
<code class="sig-name descname">put</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rest_query</span></em>, <em class="sig-param"><span class="n">data</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">files</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/webclient.html#AlyxClient.put"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.webclient.AlyxClient.put" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends a PUT request to the Alyx server.
For the dictionary contents, refer to:
<a class="reference external" href="https://alyx.internationalbrainlab.org/docs">https://alyx.internationalbrainlab.org/docs</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rest_query</strong> (<em>str</em>) – (required)the endpoint as full or relative URL</p></li>
<li><p><strong>data</strong> (<em>None</em><em>, </em><em>dict</em><em> or </em><em>str</em>) – dictionary or json encoded string</p></li>
<li><p><strong>files</strong> – dictionary / tuple (cf.requests)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>response object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="one.webclient.AlyxClient.rest">
<code class="sig-name descname">rest</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">url</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">action</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">id</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">data</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">files</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">no_cache</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/webclient.html#AlyxClient.rest"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.webclient.AlyxClient.rest" title="Permalink to this definition">¶</a></dt>
<dd><p>alyx_client.rest(): lists endpoints
alyx_client.rest(endpoint): lists actions for endpoint
alyx_client.rest(endpoint, action): lists fields and URL</p>
<p>Example REST endpoint with all actions:</p>
<blockquote>
<div><p>client.rest(‘subjects’, ‘list’)
client.rest(‘subjects’, ‘list’, field_filter1=’filterval’)
client.rest(‘subjects’, ‘create’, data=sub_dict)
client.rest(‘subjects’, ‘read’, id=’nickname’)
client.rest(‘subjects’, ‘update’, id=’nickname’, data=sub_dict)
client.rest(‘subjects’, ‘partial_update’, id=’nickname’, data=sub_dict)
client.rest(‘subjects’, ‘delete’, id=’nickname’)
client.rest(‘notes’, ‘create’, data=nd, files={‘image’: open(image_file, ‘rb’)})</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> – endpoint name</p></li>
<li><p><strong>action</strong> – ‘list’, ‘create’, ‘read’, ‘update’, ‘partial_update’, ‘delete’</p></li>
<li><p><strong>id</strong> – lookup string for actions ‘read’, ‘update’, ‘partial_update’, and ‘delete’</p></li>
<li><p><strong>data</strong> – data dictionary for actions ‘update’, ‘partial_update’ and ‘create’</p></li>
<li><p><strong>files</strong> – if file upload</p></li>
<li><p><strong>no_cache</strong> – if true the <cite>list</cite> and <cite>read</cite> actions are performed without caching</p></li>
<li><p><strong>**kwargs</strong> – filter as per the Alyx REST documentation
cf. <a class="reference external" href="https://alyx.internationalbrainlab.org/docs/">https://alyx.internationalbrainlab.org/docs/</a></p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of queried dicts (‘list’) or dict (other actions)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="one.webclient.AlyxClient._check_inputs">
<code class="sig-name descname">_check_inputs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">endpoint</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="../_modules/one/webclient.html#AlyxClient._check_inputs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.webclient.AlyxClient._check_inputs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="one.webclient.AlyxClient.json_field_write">
<code class="sig-name descname">json_field_write</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">endpoint</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">uuid</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">field_name</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">data</span><span class="p">:</span> <span class="n">dict</span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; dict<a class="reference internal" href="../_modules/one/webclient.html#AlyxClient.json_field_write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.webclient.AlyxClient.json_field_write" title="Permalink to this definition">¶</a></dt>
<dd><p>json_field_write [summary]
Write data to WILL NOT CHECK IF DATA EXISTS
NOTE: Destructive write!</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>endpoint</strong> (<em>str</em><em>, </em><em>optional</em>) – Valid alyx endpoint, defaults to None</p></li>
<li><p><strong>uuid</strong> (<em>str</em><em>, </em><em>optional</em>) – uuid or lookup name for endpoint</p></li>
<li><p><strong>field_name</strong> (<em>str</em><em>, </em><em>optional</em>) – Valid json field name, defaults to None</p></li>
<li><p><strong>data</strong> (<em>dict</em><em>, </em><em>optional</em>) – data to write to json field, defaults to None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Written data dict</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="one.webclient.AlyxClient.__dict__">
<code class="sig-name descname">__dict__</code><em class="property"> = mappingproxy({'__module__': 'one.webclient', '__doc__': '\n    Class that implements simple GET/POST wrappers for the Alyx REST API\n    http://alyx.readthedocs.io/en/latest/api.html  # FIXME old link\n    ', '_token': None, '_headers': None, 'user': None, 'base_url': None, '__init__': &lt;function AlyxClient.__init__&gt;, 'rest_schemes': &lt;property object&gt;, 'cache_dir': &lt;property object&gt;, 'is_logged_in': &lt;function AlyxClient.is_logged_in&gt;, 'list_endpoints': &lt;function AlyxClient.list_endpoints&gt;, '_generic_request': &lt;function AlyxClient._generic_request&gt;, 'authenticate': &lt;function AlyxClient.authenticate&gt;, 'delete': &lt;function AlyxClient.delete&gt;, 'download_file': &lt;function AlyxClient.download_file&gt;, 'download_cache_tables': &lt;function AlyxClient.download_cache_tables&gt;, '_validate_file_url': &lt;function AlyxClient._validate_file_url&gt;, 'rel_path2url': &lt;function AlyxClient.rel_path2url&gt;, 'get': &lt;function AlyxClient.get&gt;, 'patch': &lt;function AlyxClient.patch&gt;, 'post': &lt;function AlyxClient.post&gt;, 'put': &lt;function AlyxClient.put&gt;, 'rest': &lt;function AlyxClient.rest&gt;, '_check_inputs': &lt;function AlyxClient._check_inputs&gt;, 'json_field_write': &lt;function AlyxClient.json_field_write&gt;, 'json_field_update': &lt;function AlyxClient.json_field_update&gt;, 'json_field_remove_key': &lt;function AlyxClient.json_field_remove_key&gt;, 'json_field_delete': &lt;function AlyxClient.json_field_delete&gt;, 'clear_rest_cache': &lt;function AlyxClient.clear_rest_cache&gt;, '__dict__': &lt;attribute '__dict__' of 'AlyxClient' objects&gt;, '__weakref__': &lt;attribute '__weakref__' of 'AlyxClient' objects&gt;})</em><a class="headerlink" href="#one.webclient.AlyxClient.__dict__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="one.webclient.AlyxClient.__doc__">
<code class="sig-name descname">__doc__</code><em class="property"> = '\n    Class that implements simple GET/POST wrappers for the Alyx REST API\n    http://alyx.readthedocs.io/en/latest/api.html  # FIXME old link\n    '</em><a class="headerlink" href="#one.webclient.AlyxClient.__doc__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="one.webclient.AlyxClient.__module__">
<code class="sig-name descname">__module__</code><em class="property"> = 'one.webclient'</em><a class="headerlink" href="#one.webclient.AlyxClient.__module__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="one.webclient.AlyxClient.__weakref__">
<code class="sig-name descname">__weakref__</code><a class="headerlink" href="#one.webclient.AlyxClient.__weakref__" title="Permalink to this definition">¶</a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

<dl class="py method">
<dt id="one.webclient.AlyxClient.json_field_update">
<code class="sig-name descname">json_field_update</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">endpoint</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">uuid</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">field_name</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'json'</span></em>, <em class="sig-param"><span class="n">data</span><span class="p">:</span> <span class="n">dict</span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; dict<a class="reference internal" href="../_modules/one/webclient.html#AlyxClient.json_field_update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.webclient.AlyxClient.json_field_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Non destructive update of json field of endpoint for object
Will update the field_name of the object with pk = uuid of given endpoint
If data has keys with the same name of existing keys it will squash the old
values (uses the dict.update() method)</p>
<p>Example:
one.alyx.json_field_update(“sessions”, “eid_str”, “extended_qc”, {“key”: value})</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>endpoint</strong> (<em>str</em>) – endpoint to hit</p></li>
<li><p><strong>uuid</strong> (<em>str</em>) – uuid or lookup name of object</p></li>
<li><p><strong>field_name</strong> (<em>str</em>) – name of the json field</p></li>
<li><p><strong>data</strong> (<em>dict</em>) – dictionary with fields to be updated</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>new patched json field contents</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="one.webclient.AlyxClient._instances">
<code class="sig-name descname">_instances</code><a class="headerlink" href="#one.webclient.AlyxClient._instances" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="one.webclient.AlyxClient.json_field_remove_key">
<code class="sig-name descname">json_field_remove_key</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">endpoint</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">uuid</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">field_name</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'json'</span></em>, <em class="sig-param"><span class="n">key</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>dict<span class="p">]</span><a class="reference internal" href="../_modules/one/webclient.html#AlyxClient.json_field_remove_key"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.webclient.AlyxClient.json_field_remove_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Will remove inputted key from json field dict and reupload it to Alyx.
Needs endpoint, uuid and json field name</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>endpoint</strong> (<em>str</em><em>, </em><em>optional</em>) – endpoint to hit, defaults to None</p></li>
<li><p><strong>uuid</strong> (<em>str</em><em>, </em><em>optional</em>) – uuid or lookup name for endpoint</p></li>
<li><p><strong>field_name</strong> (<em>str</em><em>, </em><em>optional</em>) – json field name of object, defaults to None</p></li>
<li><p><strong>key</strong> (<em>str</em><em>, </em><em>optional</em>) – key name of dictionary inside object, defaults to None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>returns new content of json field</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="one.webclient.AlyxClient.json_field_delete">
<code class="sig-name descname">json_field_delete</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">endpoint</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">uuid</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">field_name</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="../_modules/one/webclient.html#AlyxClient.json_field_delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.webclient.AlyxClient.json_field_delete" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="one.webclient.AlyxClient.clear_rest_cache">
<code class="sig-name descname">clear_rest_cache</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/webclient.html#AlyxClient.clear_rest_cache"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.webclient.AlyxClient.clear_rest_cache" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ibllib.html" class="btn btn-neutral float-right" title="ibllib" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="one.util.html" class="btn btn-neutral float-left" title="one.util" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, International Brain Laboratory

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>