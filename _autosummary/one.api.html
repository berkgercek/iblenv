

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>one.api &mdash; IBL Library  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/style.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="one.converters" href="one.converters.html" />
    <link rel="prev" title="one.alf.spec.SPEC_DESCRIPTION" href="one.alf.spec.SPEC_DESCRIPTION.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> IBL Library
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../01_overview.html">IBL data structure</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../02_installation.html">Installation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../03_one.html">ONE</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../04_alf.html">Alyx Files (ALF)</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../05_datajoint.html">Datajoint</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../06_examples.html">Examples</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../07_tutorials.html">Tutorials</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../08_public.html">IBL Public Data</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../09_contribution.html">Contribution Statement</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../010_api_reference.html">API Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="one.html">one</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="one.alf.html">one.alf</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">one.api</a></li>
<li class="toctree-l3"><a class="reference internal" href="one.converters.html">one.converters</a></li>
<li class="toctree-l3"><a class="reference internal" href="one.params.html">one.params</a></li>
<li class="toctree-l3"><a class="reference internal" href="one.tests.html">one.tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="one.util.html">one.util</a></li>
<li class="toctree-l3"><a class="reference internal" href="one.webclient.html">one.webclient</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ibllib.html">ibllib</a></li>
<li class="toctree-l2"><a class="reference internal" href="brainbox.html">brainbox</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">IBL Library</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../010_api_reference.html">API Reference</a> &raquo;</li>
        
          <li><a href="one.html">one</a> &raquo;</li>
        
      <li>one.api</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/_autosummary/one.api.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="module-one.api">
<span id="one-api"></span><h1>one.api<a class="headerlink" href="#module-one.api" title="Permalink to this headline">¶</a></h1>
<p>Classes for searching, listing and (down)loading ALyx Files
TODO Document
TODO Add sig to ONE Light uuids
TODO Save changes to cache
TODO Fix update cache in AlyxONE - save parquet table
TODO save parquet in update_filesystem
TODO Make autocomplete a private method
TODO edit alf exceptions constructor with default message template?</p>
<dl>
<dt>Points of discussion:</dt><dd><ul class="simple">
<li><p>Module structure: oneibl is too restrictive, naming module <cite>one</cite> means obj should have</p></li>
</ul>
<p>different name
- Download datasets timeout
- NB: Wildcards will behave differently between REST and pandas - should regex or unix be
default?
- What should the collection default be? ‘alf’? None? An ONE param?
- Load has been removed altogether
- Remove clobber method from load functions?
- Remove exists_only from search method?
- Support for pids?
- Dealing with lists must be consistent.  Three options:</p>
<blockquote>
<div><ul class="simple">
<li><p>two methods each, e.g. load_dataset and load_datasets (con: a lot of overhead)</p></li>
<li><p>allow list inputs, recursive calls (con: function logic slightly more complex)</p></li>
<li><p>no list inputs; rely on list comprehensions (con: makes accessing meta data complex)</p></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><p>Need to check performance of 1. (re)setting index, 2. converting object array to 2D int array</p></li>
<li><p>NB: Sessions table date ordered.  Indexing by eid is therefore O(N) but not done in code.</p></li>
</ul>
<p>Datasets table has sorted index.
- Conceivably you could have a subclass for Figshare, etc., not just Alyx
- We have mode and query_type, stick to just one?</p>
</dd>
</dl>
<p class="rubric">Functions</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#one.api.ONE" title="one.api.ONE"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ONE</span></code></a></p></td>
<td><p>ONE API factory Determine which class to instantiate depending on parameters passed.</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Classes</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#one.api.One" title="one.api.One"><code class="xref py py-obj docutils literal notranslate"><span class="pre">One</span></code></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#one.api.OneAlyx" title="one.api.OneAlyx"><code class="xref py py-obj docutils literal notranslate"><span class="pre">OneAlyx</span></code></a></p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt id="one.api.One">
<em class="property">class </em><code class="sig-name descname">One</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cache_dir</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'auto'</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#One"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.One" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="one.converters.html#one.converters.ConversionMixin" title="one.converters.ConversionMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">one.converters.ConversionMixin</span></code></a></p>
<dl class="py attribute">
<dt id="one.api.One.search_terms">
<code class="sig-name descname">search_terms</code><em class="property"> = ('dataset', 'date_range', 'laboratory', 'number', 'project', 'subject', 'task_protocol')</em><a class="headerlink" href="#one.api.One.search_terms" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="one.api.One.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cache_dir</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'auto'</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#One.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.One.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

<dl class="py method">
<dt id="one.api.One.__repr__">
<code class="sig-name descname">__repr__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#One.__repr__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.One.__repr__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return repr(self).</p>
</dd></dl>

<dl class="py method">
<dt id="one.api.One.offline">
<em class="property">property </em><code class="sig-name descname">offline</code><a class="headerlink" href="#one.api.One.offline" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="one.api.One._load_cache">
<code class="sig-name descname">_load_cache</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cache_dir</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#One._load_cache"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.One._load_cache" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="one.api.One.refresh_cache">
<code class="sig-name descname">refresh_cache</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'auto'</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#One.refresh_cache"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.One.refresh_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Check and reload cache tables</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mode</strong> – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Loaded time</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="one.api.One._download_datasets">
<code class="sig-name descname">_download_datasets</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dsets</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>pathlib.Path<span class="p">]</span><a class="reference internal" href="../_modules/one/api.html#One._download_datasets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.One._download_datasets" title="Permalink to this definition">¶</a></dt>
<dd><p>Download several datasets given a set of datasets
:param dsets: list of dataset dictionaries from an Alyx REST query OR list of URL strings
:return: local file path list</p>
</dd></dl>

<dl class="py method">
<dt id="one.api.One._download_dataset">
<code class="sig-name descname">_download_dataset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dset</span></em>, <em class="sig-param"><span class="n">cache_dir</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span> &#x2192; pathlib.Path<a class="reference internal" href="../_modules/one/api.html#One._download_dataset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.One._download_dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Download a dataset from an alyx REST dictionary
:param dset: single dataset dictionary from an Alyx REST query OR URL string
:param cache_dir (optional): root directory to save the data in (home/downloads by default)
:return: local file path</p>
</dd></dl>

<dl class="py method">
<dt id="one.api.One.search">
<code class="sig-name descname">search</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">details</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">exists_only</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">query_type</span><span class="o">=</span><span class="default_value">'auto'</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#One.search"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.One.search" title="Permalink to this definition">¶</a></dt>
<dd><p>Searches sessions matching the given criteria and returns a list of matching eids</p>
<p>For a list of search terms, use the methods</p>
<blockquote>
<div><p>one.search_terms</p>
</div></blockquote>
<p>For all of the search parameters, a single value or list may be provided.  For dataset,
the sessions returned will contain all listed datasets.  For the other parameters,
the session must contain at least one of the entries</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dataset</strong> – list of dataset names. Returns sessions containing all these datasets.</p>
</dd>
</dl>
<p>A dataset matches if it contains the search string e.g. ‘wheel.position’ matches
‘_ibl_wheel.position.npy’
:param date_range: list of 2 strings or list of 2 dates that define the range (inclusive)
:param lab: a str or list of lab names, returns sessions from any of these labs
:param number: number of session to be returned, i.e. number in sequence for a given date
:param subjects: a list of subjects nickname, returns sessions for any of these subjects
:param task_protocol: task protocol name (can be partial, i.e. any task protocol</p>
<blockquote>
<div><p>containing that str will be found)</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>project</strong> – project name (can be partial, i.e. any task protocol containing
that str will be found)</p></li>
<li><p><strong>details</strong> – if true also returns a dict of dataset details</p></li>
<li><p><strong>exists_only</strong> – if true, datasets that were recently not found in the filesystem are</p></li>
</ul>
</dd>
</dl>
<p>ignored TODO Remove
:param query_type: Query cache (‘local’) or Alyx database (‘remote’)</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of eids, if details is True, also returns a list of dictionaries,
each entry corresponding to a matching session</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="one.api.One._update_filesystem">
<code class="sig-name descname">_update_filesystem</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">datasets</span></em>, <em class="sig-param"><span class="n">offline</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">update_exists</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">clobber</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#One._update_filesystem"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.One._update_filesystem" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the local filesystem for the given datasets
Given a set of datasets, check whether records correctly reflect the filesystem.
Called by load methods, this returns a list of file paths to load and return.
TODO This needs changing; overlaod for downloading?
TODO change name to check_files, check_present, present_datasets, check_local_files?</p>
<blockquote>
<div><p>check_filesystem?
This changes datasets frame, calls _update_cache(sessions=None, datasets=None) to
update and save tables.  Download_datasets can also call this function.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>datasets</strong> – A list or DataFrame of dataset records</p></li>
<li><p><strong>offline</strong> – If false and Web client present, downloads the missing datasets from a</p></li>
</ul>
</dd>
</dl>
<p>remote repository
:param update_exists: If true, the cache is updated to reflect the filesystem
:param clobber: If true and not offline, datasets are re-downloaded regardless of local
filesystem
:return: A list of file paths for the datasets (None elements for non-existent datasets)</p>
</dd></dl>

<dl class="py method">
<dt id="one.api.One._index_type">
<code class="sig-name descname">_index_type</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">table</span><span class="o">=</span><span class="default_value">'sessions'</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#One._index_type"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.One._index_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="one.api.One.get_details">
<code class="sig-name descname">get_details</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">eid</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>str<span class="p">, </span>pathlib.Path<span class="p">, </span>uuid.UUID<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">full</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#One.get_details"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.One.get_details" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="one.api.One.list_subjects">
<code class="sig-name descname">list_subjects</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>str<span class="p">]</span><a class="reference internal" href="../_modules/one/api.html#One.list_subjects"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.One.list_subjects" title="Permalink to this definition">¶</a></dt>
<dd><p>List all subjects in database
:return: Sorted list of subject names</p>
</dd></dl>

<dl class="py method">
<dt id="one.api.One.list_datasets">
<code class="sig-name descname">list_datasets</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">eid</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">collection</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">details</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; Union<span class="p">[</span>numpy.ndarray<span class="p">, </span>pandas.core.frame.DataFrame<span class="p">]</span><a class="reference internal" href="../_modules/one/api.html#One.list_datasets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.One.list_datasets" title="Permalink to this definition">¶</a></dt>
<dd><p>Given an eid, return the datasets for those sessions.  If no eid is provided,
a list of all datasets is returned.  When details is false, a sorted array of unique
datasets is returned (their relative paths).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>eid</strong> – Experiment session identifier; may be a UUID, URL, experiment reference string</p>
</dd>
</dl>
<p>details dict or Path
:param details: When true, a pandas DataFrame is returned, otherwise a numpy array of
relative paths (collection/revision/filename) - see one.alf.spec.describe for details.
:param collection: Filter by a given collection string
:return: Slice of datasets table or numpy array if details is False</p>
</dd></dl>

<dl class="py method">
<dt id="one.api.One.list_collections">
<code class="sig-name descname">list_collections</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">eid</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">details</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; Union<span class="p">[</span>numpy.ndarray<span class="p">, </span>dict<span class="p">]</span><a class="reference internal" href="../_modules/one/api.html#One.list_collections"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.One.list_collections" title="Permalink to this definition">¶</a></dt>
<dd><p>List the collections for a given experiment.  If no experiment id is given,
all collections are returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eid</strong> (<em>[</em><em>str</em><em>, </em><em>UUID</em><em>, </em><em>Path</em><em>, </em><em>dict</em><em>]</em>) – Experiment session identifier; may be a UUID, URL, experiment reference string
details dict or Path</p></li>
<li><p><strong>details</strong> (<em>bool</em>) – If true a dict of pandas datasets tables is returned with collections as keys,
otherwise a numpy array of unique collections</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>A numpy array of unique collections or dict of datasets tables</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="one.api.One.list_revisions">
<code class="sig-name descname">list_revisions</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">eid</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">dataset</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">collection</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">details</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#One.list_revisions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.One.list_revisions" title="Permalink to this definition">¶</a></dt>
<dd><p>List the revisions for a given experiment.  If no experiment id is given,
all collections are returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eid</strong> (<em>[</em><em>str</em><em>, </em><em>UUID</em><em>, </em><em>Path</em><em>, </em><em>dict</em><em>]</em>) – Experiment session identifier; may be a UUID, URL, experiment reference string
details dict or Path</p></li>
<li><p><strong>details</strong> (<em>bool</em>) – If true a dict of pandas datasets tables is returned with collections as keys,
otherwise a numpy array of unique collections</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>A numpy array of unique collections or dict of datasets tables</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="one.api.One._filter_by_collection">
<em class="property">static </em><code class="sig-name descname">_filter_by_collection</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">datasets</span><span class="p">:</span> <span class="n">pandas.core.frame.DataFrame</span></em>, <em class="sig-param"><span class="n">collection</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; pandas.core.frame.DataFrame<a class="reference internal" href="../_modules/one/api.html#One._filter_by_collection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.One._filter_by_collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a pandas datasets table containing records that match a given collection
:param datasets: A datasets cache table
:param collection: The collection name to match
:return: A slice of the input table, where all datasets match a given collection</p>
</dd></dl>

<dl class="py method">
<dt id="one.api.One.load_object">
<code class="sig-name descname">load_object</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">eid</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>str<span class="p">, </span>pathlib.Path<span class="p">, </span>uuid.UUID<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">obj</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">collection</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">revision</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">query_type</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'auto'</span></em>, <em class="sig-param"><span class="n">download_only</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span> &#x2192; Union<span class="p">[</span><a class="reference internal" href="one.alf.io.html#one.alf.io.AlfBunch" title="one.alf.io.AlfBunch">one.alf.io.AlfBunch</a><span class="p">, </span>List<span class="p">[</span>pathlib.Path<span class="p">]</span><span class="p">]</span><a class="reference internal" href="../_modules/one/api.html#One.load_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.One.load_object" title="Permalink to this definition">¶</a></dt>
<dd><p>TODO Add more examples;
Load all attributes of an ALF object from a Session ID and an object name.  Any datasets
with matching object name will be loaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>eid</strong> – Experiment session identifier; may be a UUID, URL, experiment reference string</p>
</dd>
</dl>
<p>details dict or Path
:param obj: The ALF object to load.  Supports asterisks as wildcards.
:param collection:  The collection to which the object belongs, e.g. ‘alf/probe01’.
Supports asterisks as wildcards.
:param revision: The last revision before a given string (typically an ISO date).  If
None, the default dataset is returned (usually the most recent revision).
:param query_type: Query cache (‘local’) or Alyx database (‘remote’)
:param download_only: When true the data are downloaded and the file paths are returned
:param kwargs: Additional filters for datasets, including namespace and timescale
:return: An ALF bunch or if download_only is True, a list of Paths objects</p>
<p class="rubric">Examples</p>
<p>load_object(eid, ‘moves’)
load_object(eid, ‘trials’)
load_object(eid, ‘spikes’, collection=’.*probe01’)
load_object(eid, ‘spikes’, namespace=’ibl’)
load_object(eid, ‘spikes’, timescale=’ephysClock’)</p>
</dd></dl>

<dl class="py method">
<dt id="one.api.One.load_dataset">
<code class="sig-name descname">load_dataset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">eid</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>str<span class="p">, </span>pathlib.Path<span class="p">, </span>uuid.UUID<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">dataset</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">collection</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">revision</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">query_type</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'auto'</span></em>, <em class="sig-param"><span class="n">download_only</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span> &#x2192; Any<a class="reference internal" href="../_modules/one/api.html#One.load_dataset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.One.load_dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a dataset for a given session id and dataset name</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>eid</strong> – Experiment session identifier; may be a UUID, URL, experiment reference string</p>
</dd>
</dl>
<p>details dict or Path.
:param dataset: The ALF dataset to load.  Supports asterisks as wildcards.
:param collection:  The collection to which the object belongs, e.g. ‘alf/probe01’.
For IBL this is the relative path of the file from the session root.
Supports asterisks as wildcards.
:param revision: The last revision before a given string (typically an ISO date).  If
None, the default dataset is returned (usually the most recent revision).
:param query_type: Query cache (‘local’) or Alyx database (‘remote’)
:param download_only: When true the data are downloaded and the file paths are returned
:param kwargs:
:return:</p>
</dd></dl>

<dl class="py method">
<dt id="one.api.One.load_datasets">
<code class="sig-name descname">load_datasets</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">eid</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>str<span class="p">, </span>pathlib.Path<span class="p">, </span>uuid.UUID<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">datasets</span><span class="p">:</span> <span class="n">List<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">collections</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">revisions</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">query_type</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'auto'</span></em>, <em class="sig-param"><span class="n">assert_present</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">download_only</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span> &#x2192; Any<a class="reference internal" href="../_modules/one/api.html#One.load_datasets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.One.load_datasets" title="Permalink to this definition">¶</a></dt>
<dd><p>Load datasets for a given session id.  Returns two lists the length of datasets.  The
first is the data (or file paths if download_data is false), the second is a list of
meta data Bunches.  If assert_present is false, missing data will be returned as None.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>eid</strong> – Experiment session identifier; may be a UUID, URL, experiment reference string</p>
</dd>
</dl>
<p>details dict or Path.
:param datasets: The ALF datasets to load.  Supports asterisks as wildcards.
:param collections:  The collection(s) to which the object(s) belong, e.g. ‘alf/probe01’.
For IBL this is the relative path of the file from the session root.
Supports asterisks as wildcards.
:param revisions: The last revision before a given string (typically an ISO date).  If
None, the default dataset is returned (usually the most recent revision).
:param query_type: Query cache (‘local’) or Alyx database (‘remote’)
:param assert_present: If true, missing datasets raises and error, otherwise None is
returned
:param download_only: When true the data are downloaded and the file paths are returned
:param kwargs:</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Returns a list of data (or file paths) the length of datasets, and a list of</p>
</dd>
</dl>
<p>meta data Bunches. If assert_present is False, missing data will be None</p>
</dd></dl>

<dl class="py method">
<dt id="one.api.One.load_dataset_from_id">
<code class="sig-name descname">load_dataset_from_id</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dset_id</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>str<span class="p">, </span>uuid.UUID<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">download_only</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">details</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span> &#x2192; Any<a class="reference internal" href="../_modules/one/api.html#One.load_dataset_from_id"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.One.load_dataset_from_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="one.api.One.setup">
<em class="property">static </em><code class="sig-name descname">setup</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cache_dir</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#One.setup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.One.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Interactive command tool that populates parameter file for ONE IBL.
FIXME See subclass</p>
</dd></dl>

<dl class="py attribute">
<dt id="one.api.One.__doc__">
<code class="sig-name descname">__doc__</code><em class="property"> = None</em><a class="headerlink" href="#one.api.One.__doc__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="one.api.One.__module__">
<code class="sig-name descname">__module__</code><em class="property"> = 'one.api'</em><a class="headerlink" href="#one.api.One.__module__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt id="one.api.ONE">
<code class="sig-name descname">ONE</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'auto'</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#ONE"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.ONE" title="Permalink to this definition">¶</a></dt>
<dd><p>ONE API factory
Determine which class to instantiate depending on parameters passed.</p>
</dd></dl>

<dl class="py class">
<dt id="one.api.OneAlyx">
<em class="property">class </em><code class="sig-name descname">OneAlyx</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">username</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">password</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">base_url</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">cache_dir</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'auto'</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#OneAlyx"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.OneAlyx" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#one.api.One" title="one.api.One"><code class="xref py py-class docutils literal notranslate"><span class="pre">one.api.One</span></code></a></p>
<dl class="py method">
<dt id="one.api.OneAlyx.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">username</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">password</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">base_url</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">cache_dir</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'auto'</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#OneAlyx.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.OneAlyx.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

<dl class="py method">
<dt id="one.api.OneAlyx.__repr__">
<code class="sig-name descname">__repr__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#OneAlyx.__repr__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.OneAlyx.__repr__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return repr(self).</p>
</dd></dl>

<dl class="py method">
<dt id="one.api.OneAlyx._load_cache">
<code class="sig-name descname">_load_cache</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cache_dir</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">clobber</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#OneAlyx._load_cache"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.OneAlyx._load_cache" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="one.api.OneAlyx.alyx">
<em class="property">property </em><code class="sig-name descname">alyx</code><a class="headerlink" href="#one.api.OneAlyx.alyx" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="one.api.OneAlyx._cache_dir">
<em class="property">property </em><code class="sig-name descname">_cache_dir</code><a class="headerlink" href="#one.api.OneAlyx._cache_dir" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="one.api.OneAlyx.describe_dataset">
<code class="sig-name descname">describe_dataset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dataset_type</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#OneAlyx.describe_dataset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.OneAlyx.describe_dataset" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="one.api.OneAlyx.load_dataset">
<code class="sig-name descname">load_dataset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">eid</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>str<span class="p">, </span>pathlib.Path<span class="p">, </span>uuid.UUID<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">dataset</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">collection</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">revision</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">query_type</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">download_only</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; Any<a class="reference internal" href="../_modules/one/api.html#OneAlyx.load_dataset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.OneAlyx.load_dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a single dataset from a Session ID and a dataset type.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>eid</strong> – Experiment session identifier; may be a UUID, URL, experiment reference string</p>
</dd>
</dl>
<p>details dict or Path.
:param dataset: The ALF dataset to load.  Supports asterisks as wildcards.
:param collection:  The collection to which the object belongs, e.g. ‘alf/probe01’.
For IBL this is the relative path of the file from the session root.
Supports asterisks as wildcards.
:param revision: The last revision before a given string (typically an ISO date).  If
None, the default dataset is returned (usually the most recent revision).
:param query_type: Query cache (‘local’) or Alyx database (‘remote’)
:param download_only: When true the data are downloaded and the file path is returned.
:return: dataset or a Path object if download_only is true.</p>
<p class="rubric">Examples</p>
<p>intervals = one.load_dataset(eid, ‘_ibl_trials.intervals.npy’)
intervals = one.load_dataset(eid, ‘<em>trials.intervals</em>’)
filepath = one.load_dataset(eid ‘_ibl_trials.intervals.npy’, download_only=True)
spike_times = one.load_dataset(eid ‘spikes.times.npy’, collection=’alf/probe01’)
old_spikes = one.load_dataset(eid, ‘’spikes.times.npy’,</p>
<blockquote>
<div><p>collection=’alf/probe01’, revision=’2020-08-31’)</p>
</div></blockquote>
<p># FIXME Revisions</p>
</dd></dl>

<dl class="py method">
<dt id="one.api.OneAlyx.load_collection">
<code class="sig-name descname">load_collection</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#OneAlyx.load_collection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.OneAlyx.load_collection" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="one.api.OneAlyx.load_object">
<code class="sig-name descname">load_object</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">eid</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>str<span class="p">, </span>pathlib.Path<span class="p">, </span>uuid.UUID<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">obj</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">collection</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">download_only</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">query_type</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">clobber</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span> &#x2192; Union<span class="p">[</span><a class="reference internal" href="one.alf.io.html#one.alf.io.AlfBunch" title="one.alf.io.AlfBunch">one.alf.io.AlfBunch</a><span class="p">, </span>List<span class="p">[</span>pathlib.Path<span class="p">]</span><span class="p">]</span><a class="reference internal" href="../_modules/one/api.html#OneAlyx.load_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.OneAlyx.load_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Load all attributes of an ALF object from a Session ID and an object name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>eid</strong> – Experiment session identifier; may be a UUID, URL, experiment reference string</p>
</dd>
</dl>
<p>details dict or Path
:param obj: The ALF object to load.  Supports asterisks as wildcards.
:param collection: The collection to which the object belongs, e.g. ‘alf/probe01’.
Supports asterisks as wildcards.
:param download_only: When true the data are downloaded and the file paths are returned
:param query_type: Query cache (‘local’) or Alyx database (‘remote’)
:param clobber: If true, local data are re-downloaded
:param kwargs: Optional filters for the ALF objects, including namespace and timescale
:return: An ALF bunch or if download_only is True, a list of Paths objects</p>
<p class="rubric">Examples</p>
<p>load_object(eid, ‘<a href="#id1"><span class="problematic" id="id2">*</span></a>moves’)
load_object(eid, ‘trials’)
load_object(eid, ‘spikes’, collection=’<a href="#id3"><span class="problematic" id="id4">*</span></a>probe01’)</p>
<p># FIXME Revisions</p>
</dd></dl>

<dl class="py method">
<dt id="one.api.OneAlyx.pid2eid">
<code class="sig-name descname">pid2eid</code><span class="sig-paren">(</span><em class="sig-param">pid: str</em>, <em class="sig-param">query_type='auto') -&gt; (&lt;class 'str'&gt;</em>, <em class="sig-param">&lt;class 'str'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#OneAlyx.pid2eid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.OneAlyx.pid2eid" title="Permalink to this definition">¶</a></dt>
<dd><p>Given an Alyx probe UUID string, returns the session id string and the probe label
(i.e. the ALF collection)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pid</strong> – A probe UUID</p></li>
<li><p><strong>query_type</strong> – Query mode, options include ‘auto’, ‘remote’ and ‘refresh’</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(experiment ID, probe label)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="one.api.OneAlyx.autocomplete">
<code class="sig-name descname">autocomplete</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">term</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#OneAlyx.autocomplete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.OneAlyx.autocomplete" title="Permalink to this definition">¶</a></dt>
<dd><p>TODO Move to super class
Validate search term and return complete name, e.g. autocomplete(‘subj’) == ‘subject’</p>
</dd></dl>

<dl class="py method">
<dt id="one.api.OneAlyx.search">
<code class="sig-name descname">search</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">details</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">query_type</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#OneAlyx.search"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.OneAlyx.search" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Applies a filter to the sessions (eid) table and returns a list of json dictionaries</dt><dd><p>corresponding to sessions.</p>
</dd>
</dl>
<p>For a list of search terms, use the methods</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">one</span><span class="o">.</span><span class="n">search_terms</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dataset</strong> – list of dataset names. Returns sessions containing all these datasets.</p>
</dd>
</dl>
<p>A dataset matches if it contains the search string e.g. ‘wheel.position’ matches
‘_ibl_wheel.position.npy’
:param date_range: list of 2 strings or list of 2 dates that define the range (inclusive)
:param lab: a str or list of lab names, returns sessions from any of these labs
:param number: number of session to be returned, i.e. number in sequence for a given date
:param subjects: a list of subjects nickname, returns sessions for any of these subjects
:param task_protocol: task protocol name (can be partial, i.e. any task protocol</p>
<blockquote>
<div><p>containing that str will be found)</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>project</strong> – project name (can be partial, i.e. any task protocol containing
that str will be found)</p></li>
<li><p><strong>location</strong> – a str or list of lab location (as per Alyx definition) name
Note: this corresponds to the specific rig, not the lab geographical
location per se</p></li>
<li><p><strong>/ performance_gte</strong> (<em>performance_lte</em>) – search only for sessions whose performance is</p></li>
</ul>
</dd>
</dl>
<p>less equal or greater equal than a pre-defined threshold as a percentage (0-100)
:param users: a list of Alyx usernames</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>details</strong> – default False, returns also the session details as per the REST response</p></li>
<li><p><strong>query_type</strong> – Query cache (‘local’) or Alyx database (‘remote’)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of eids, if details is True, also returns a list of json dictionaries,
each entry corresponding to a matching session</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="one.api.OneAlyx._download_dataset">
<code class="sig-name descname">_download_dataset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dset</span></em>, <em class="sig-param"><span class="n">cache_dir</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">update_cache</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#OneAlyx._download_dataset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.OneAlyx._download_dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Download a dataset from an alyx REST dictionary
:param dset: single dataset dictionary from an Alyx REST query OR URL string
:param cache_dir: root directory to save the data in (home/downloads by default)
:param update_cache: if true, the cache is updated when filesystem discrepancies are
encountered
:return: local file path</p>
</dd></dl>

<dl class="py method">
<dt id="one.api.OneAlyx._tag_mismatched_file_record">
<code class="sig-name descname">_tag_mismatched_file_record</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">url</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#OneAlyx._tag_mismatched_file_record"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.OneAlyx._tag_mismatched_file_record" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="one.api.OneAlyx._download_file">
<code class="sig-name descname">_download_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">url</span></em>, <em class="sig-param"><span class="n">target_dir</span></em>, <em class="sig-param"><span class="n">clobber</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">offline</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">keep_uuid</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">file_size</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">hash</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#OneAlyx._download_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.OneAlyx._download_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Downloads a single file from an HTTP webserver.  The webserver in question is set by the
AlyxClient object.
:param url: an absolute or relative URL for a remote dataset
:param clobber: (bool: False) overwrites local dataset if any
:param offline:
:param keep_uuid:
:param file_size:
:param hash:
:return:</p>
</dd></dl>

<dl class="py method">
<dt id="one.api.OneAlyx.setup">
<em class="property">static </em><code class="sig-name descname">setup</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#OneAlyx.setup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.OneAlyx.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>TODO Interactive command tool that sets up cache for ONE.</p>
</dd></dl>

<dl class="py method">
<dt id="one.api.OneAlyx.eid2path">
<code class="sig-name descname">eid2path</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">eid</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">query_type</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; Union<span class="p">[</span>pathlib.Path<span class="p">, </span>Sequence<span class="p">[</span>pathlib.Path<span class="p">]</span><span class="p">]</span><a class="reference internal" href="../_modules/one/api.html#OneAlyx.eid2path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.OneAlyx.eid2path" title="Permalink to this definition">¶</a></dt>
<dd><p>From an experiment id gets the local cache path
:param eid: Experiment session identifier; may be a UUID, URL, experiment reference string
details dict or Path
:param query_type: if set to ‘remote’, will force database connection
:return: eid or list of eids</p>
</dd></dl>

<dl class="py method">
<dt id="one.api.OneAlyx.path2eid">
<code class="sig-name descname">path2eid</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path_obj</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>str<span class="p">, </span>pathlib.Path<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">query_type</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; Union<span class="p">[</span>pathlib.Path<span class="p">, </span>Sequence<span class="p">[</span>pathlib.Path<span class="p">]</span><span class="p">]</span><a class="reference internal" href="../_modules/one/api.html#OneAlyx.path2eid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.OneAlyx.path2eid" title="Permalink to this definition">¶</a></dt>
<dd><p>From a local path, gets the experiment id
:param path_obj: local path or list of local paths
:param query_type: if set to ‘remote’, will force database connection
:return: eid or list of eids</p>
</dd></dl>

<dl class="py method">
<dt id="one.api.OneAlyx.path2url">
<code class="sig-name descname">path2url</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filepath</span></em>, <em class="sig-param"><span class="n">query_type</span><span class="o">=</span><span class="default_value">'auto'</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#OneAlyx.path2url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.OneAlyx.path2url" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a local file path, returns the URL of the remote file.
:param filepath: A local file path
:param query_type: if set to ‘remote’, will force database connection
:return: A URL string</p>
</dd></dl>

<dl class="py method">
<dt id="one.api.OneAlyx.datasets_from_type">
<code class="sig-name descname">datasets_from_type</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">eid</span></em>, <em class="sig-param"><span class="n">dataset_type</span></em>, <em class="sig-param"><span class="n">full</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#OneAlyx.datasets_from_type"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.OneAlyx.datasets_from_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Get list of datasets belonging to a given dataset type for a given session
:param eid: Experiment session identifier; may be a UUID, URL, experiment reference string
details dict or Path
:param dataset_type: A dataset type, e.g. camera.times
:param full: If True, a dictionary of details is returned for each dataset
:return: A list of datasets belonging to that session’s dataset type</p>
</dd></dl>

<dl class="py method">
<dt id="one.api.OneAlyx.dataset2type">
<code class="sig-name descname">dataset2type</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dset</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#OneAlyx.dataset2type"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.OneAlyx.dataset2type" title="Permalink to this definition">¶</a></dt>
<dd><p>Return dataset type from dataset</p>
</dd></dl>

<dl class="py method">
<dt id="one.api.OneAlyx.describe_revision">
<code class="sig-name descname">describe_revision</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">revision</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#OneAlyx.describe_revision"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.OneAlyx.describe_revision" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="one.api.OneAlyx._dataset_name2id">
<code class="sig-name descname">_dataset_name2id</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dset_name</span></em>, <em class="sig-param"><span class="n">eid</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#OneAlyx._dataset_name2id"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.OneAlyx._dataset_name2id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="one.api.OneAlyx.get_details">
<code class="sig-name descname">get_details</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">eid</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">full</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">query_type</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#OneAlyx.get_details"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#one.api.OneAlyx.get_details" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns details of eid like from one.search, optional return full
session details.</p>
</dd></dl>

<dl class="py attribute">
<dt id="one.api.OneAlyx.__doc__">
<code class="sig-name descname">__doc__</code><em class="property"> = None</em><a class="headerlink" href="#one.api.OneAlyx.__doc__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="one.api.OneAlyx.__module__">
<code class="sig-name descname">__module__</code><em class="property"> = 'one.api'</em><a class="headerlink" href="#one.api.OneAlyx.__module__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="one.converters.html" class="btn btn-neutral float-right" title="one.converters" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="one.alf.spec.SPEC_DESCRIPTION.html" class="btn btn-neutral float-left" title="one.alf.spec.SPEC_DESCRIPTION" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, International Brain Laboratory

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>